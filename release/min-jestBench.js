var jestBench_prototype=function(){"use strict";var t=function(){var t=function(){!function(t){var e,n,i,o,r;t.add=function(t,e,i){if(e||i){var o;"[object Array]"===Object.prototype.toString.call(i)?o=i:(o=Array.prototype.slice.call(arguments,2),o||(o=[])),n.push([e,t,o])}else n.push(t)},t.after=function(t,e,n){n||(n="time"+(new Date).getTime()+Math.random(1e7)),o[n]={step:Math.floor(1e3*t),fn:e,nextTime:0,remove:!0}},t.asap=function(t){this.add(t)},t.every=function(t,e,n){n||(n="time"+(new Date).getTime()+Math.random(1e7)),o[n]={step:Math.floor(1e3*t),fn:e,nextTime:0}},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){if(!e){this.polyfill();var t,s;if("undefined"!=typeof window){var t=window.requestAnimationFrame,s=window.cancelRequestAnimationFrame;["","ms","moz","webkit","o"].forEach(function(e){t||(t=window[e+"RequestAnimationFrame"],s=window[e+"CancelAnimationFrame"]||window[e+"CancelRequestAnimationFrame"])})}t||(t=function(t){return setTimeout(t,16)}),s||(s=function(t){clearTimeout(t)}),n=[],i={},o={},r=[];var a=0,c=function(){for(var e,s=(new Date).getTime();e=n.shift();)"[object Array]"===Object.prototype.toString.call(e)?e[1].apply(e[0],e[2]):e();for(var u=0;u<r.length;u++){var f=r[u];f()}for(var l in i)if(i.hasOwnProperty(l)){var h=i[l];h[0](h[1]),delete i[l]}for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];h.nextTime<s&&(h.remove?h.nextTime>0?(h.fn(),delete o[l]):h.nextTime=s+h.step:(h.fn(),h.nextTime=s+h.step)),h.until&&h.until<s&&delete o[l]}t(c),a=s};c(),e=!0}}),t.once=function(t,e,n){i[t]=[e,n]},t.onFrame=function(t){r.push(t)},t.polyfill=function(){},t.removeFrameFn=function(t){var e=r.indexOf(t);return e>=0?(t._onRemove&&t._onRemove(),r.splice(e,1),!0):!1}}(this)},n=function(t,e,i,o,r,s,a,c){if(!(this instanceof n))return new n(t,e,i,o,r,s,a,c);var u=[t,e,i,o,r,s,a,c];if(this.__factoryClass){var f,l=this;if(this.__factoryClass.forEach(function(t){f=t.apply(l,u)}),"[object Function]"==Object.prototype.toString.call(f)){if(f._classInfo.name!=n._classInfo.name)return new f(t,e,i,o,r,s,a,c)}else if(f)return f}if(this.__traitInit){var l=this;this.__traitInit.forEach(function(t){t.apply(l,u)})}else"function"==typeof this.init&&this.init.apply(this,u)};n._classInfo={name:"later"},n.prototype=new t,"undefined"!=typeof window&&(window.later=n),"undefined"!=typeof window&&(window.later_prototype=t),function(t){t.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},t.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},t.isObject=function(t){return t===Object(t)}}(this),function(t){t.all=function(t){var n;n=this.isArray(t)?t:Array.prototype.slice.call(arguments,0);var i=n.length,o=0,r=[],s=new Array(i);return this.then(function(){var t=e();return 0==n.length&&t.resolve([]),n.forEach(function(e,n){e.then?(r.push(e),e.then(function(e){s[n]=e,o++,o==i&&t.resolve(s)},function(e){t.reject(e)})):t.reject("Not list of promises")}),t})},t.collect=function(t,n,i){var o;o=this.isArray(n)?n:[n];var r=o.length,s=!1,a=!1,c=0,u=[],f=i||{};return this.then(function(){var n=e();return o.forEach(function(e){e.then?(u.push(e),e.then(function(e){c++,s=t(e,f),(s&&!a||0==a&&r==c)&&(n.resolve(f),a=!0)},function(t){n.reject(t)})):n.reject("Not list of promises")}),n})},t.fail=function(t){return this.then(null,t)},t.fulfill=function(t){if(!(this._rejected||this._fulfilled&&t!=this._stateValue)){this._fulfilled=!0,this._stateValue=t;for(var e=this._childPromises.length;e--;){var n=this._childPromises.shift();if(n._onFulfill)try{var i=n._onFulfill(t);"undefined"!=typeof i?n.resolve(i):n.fulfill(t)}catch(o){n.reject(o)}else n.fulfill(t)}this._state=1,this.triggerStateChange()}},t.genPlugin=function(t,n){this.plugin(t,function(){var t=Array.prototype.slice.call(arguments,0);console.log("Plugin args",t);var i=e();return this.then(function(){var e=Array.prototype.slice.call(arguments,0),o=t.concat(e),r=n.apply(this,o);i.resolve(r)},function(t){i.reject(t)}),i})},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(t,e){if(this._state=0,this._stateValue=null,this._isAPromise=!0,this._childPromises=[],this.isFunction(t)&&(this._onFulfill=t),this.isFunction(e)&&(this._onReject=e),!e&&this.isFunction(t)){var i=this;n().asap(function(){console.log("--- calling the onFulfilled "),t(function(t){i.resolve(t)},function(t){i.resolve(t)})})}}),t.isFulfilled=function(){return 1==this._state},t.isPending=function(){return 0==this._state},t.isRejected=function(){return 2==this._state},t.nodeStyle=function(t,e){this.plugin(t,function(){var t,n,i=Array.prototype.slice.call(arguments,0),o=0;i.length>=0&&(t=i[i.length-1],"[object Function]"==Object.prototype.toString.call(t)&&(n=t,o=i.length-1));var r=wishes().pending();return this.then(function(){var t=wishes().pending(),s=Array.prototype.slice.call(arguments,0);console.log("Orig args",i),console.log("Then args",s);var a;0==i.length&&(a=s),0==s.length&&(a=i),a||(a=s.concat(i)),o=a.length,n&&o--,a[o]=function(e){if(e)return console.log("Got error ",e),t.reject(e),void r.reject(e);if(n){var i=Array.prototype.slice.call(arguments),o=n.apply(this,i);r.resolve(o)}else{var i=Array.prototype.slice.call(arguments,1);r.resolve.apply(r,i)}},t.then(function(t){r.resolve(t)}),console.log("nodeStyle after concat",a);e.apply(this,a);return t},function(t){r.reject(t)}),r})},t.onStateChange=function(t){this._listeners||(this._listeners=[]),this._listeners.push(t)},t.plugin=function(e,n){return t[e]=n,this},t.props=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({name:n,promise:t[n]});var i=e.length,o=0,r=[],s={};return this.then(function(){var t=wishes().pending();return e.forEach(function(e){var n=e.promise,a=e.name;n.then?(r.push(n),n.then(function(e){s[a]=e,o++,o==i&&t.resolve(s)},function(e){t.reject(e)})):t.reject("Not list of promises")}),t})},t.reject=function(t){if(!(this._fulfilled||this._rejected&&t!=this._rejectReason)){this._state=2,this._rejected=!0,this._rejectReason=t;for(var e=this._childPromises.length;e--;){var n=this._childPromises.shift();if(n._onReject)try{n._onReject(t),n.reject(t)}catch(i){n.reject(i)}else n.reject(t)}this.triggerStateChange()}},t.rejectReason=function(t){return t?void(this._rejectReason=t):this._rejectReason},t.resolve=function(t){if(!(this._state>0)){if(t==this)return this._rejectReason="TypeError",void this.reject(this._rejectReason);if(this.isObject(t)&&t._isAPromise){if(this._state=t._state,this._stateValue=t._stateValue,this._rejectReason=t._rejectReason,0===this._state){var e=this;t.onStateChange(function(){1==t._state&&e.resolve(t.value()),2==t._state&&e.reject(t.rejectReason())})}return 1==this._state&&this.fulfill(this._stateValue),void(2==this._state&&this.reject(this._rejectReason))}if(this.isObject(t)&&t.then&&this.isFunction(t.then)){var n=!1;try{var e=this;t.then.call(t,function(t){n||(e.resolve(t),n=!0)},function(t){n||(e.reject(t),n=!0)})}catch(i){n||this.reject(i)}}else this._state=1,this._stateValue=t,this.fulfill(t)}},t.state=function(t){return"undefined"!=typeof t&&(this._state=t),this._state},t.then=function(t,i){i||(i=function(){});var o=new e(t,i),r=this;return 1==this._state&&n().asap(function(){r.fulfill(r.value())}),2==this._state&&ater().asap(function(){r.reject(r.rejectReason())}),this._childPromises.push(o),o},t.triggerStateChange=function(){var t=this;this._listeners&&(this._listeners.forEach(function(e){e(t)}),this._listeners.length=0)},t.value=function(t){return"undefined"!=typeof t?(this._stateValue=t,this):this._stateValue}}(this)},e=function(t,n,i,o,r,s,a,c){if(!(this instanceof e))return new e(t,n,i,o,r,s,a,c);var u=[t,n,i,o,r,s,a,c];if(this.__factoryClass){var f,l=this;if(this.__factoryClass.forEach(function(t){f=t.apply(l,u)}),"[object Function]"==Object.prototype.toString.call(f)){if(f._classInfo.name!=e._classInfo.name)return new f(t,n,i,o,r,s,a,c)}else if(f)return f}if(this.__traitInit){var l=this;this.__traitInit.forEach(function(t){t.apply(l,u)})}else"function"==typeof this.init&&this.init.apply(this,u)};e._classInfo={name:"_promise"},e.prototype=new t,"undefined"!=typeof window&&(window._promise=e),"undefined"!=typeof window&&(window._promise_prototype=t);var n=function(){var t=function(){!function(t){t.guid=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},t.isArray=function(t){return"undefined"==typeof t?this.__isA:"[object Array]"===Object.prototype.toString.call(t)},t.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},t.isObject=function(t){return"undefined"==typeof t?this.__isO:t===Object(t)}}(this),function(t){t.addRows=function(t){var n=e(),i=this._db.transaction([this._table],"readwrite");i.oncomplete=function(){n.resolve(!0)},i.onerror=function(){};var o=i.objectStore(this._table);for(var r in t){var s=o.add(t[r]);s.onsuccess=function(){}}return n},t.clear=function(){var t=e(),n=this._db.transaction(this._table,"readwrite"),i=n.objectStore(this._table),o=i.clear();return o.onerror=function(e){t.fail(e.target.errorCode)},o.onsuccess=function(){t.resolve(!0)},t},t.count=function(){var t=e(),n=this._db.transaction([this._table],"readonly");return n.objectStore(this._table).count().onsuccess=function(e){t.resolve(e.target.result)},t},t.forEach=function(t){var e=this._db.transaction(this._table,"readwrite"),n=e.objectStore(this._table);e.oncomplete=function(){};var i=n.openCursor();i.onerror=function(t){console.log(t)},i.onsuccess=function(e){var n=e.target.result;n&&(t(n.value,n),n.continue())}},t.get=function(t){var n=e(),i=this._db.transaction(this._table,"readonly"),o=i.objectStore(this._table),r=o.get(t);return r.onerror=function(e){console.log("Could not get ",t),n.fail(e.target.errorCode)},r.onsuccess=function(){n.resolve(r.result)},n},t.getAll=function(){var t=e(),n=this._db.transaction(this._table,"readonly"),i=n.objectStore(this._table),o=[];n.oncomplete=function(){t.resolve(o)};var r=i.openCursor();return r.onerror=function(t){console.log(t)},r.onsuccess=function(t){var e=t.target.result;e&&(o.push(e.value),e.continue())},t},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(t,e){this._db=t,this._table=e}),t.readAndDelete=function(){var t=e(),n=this._db.transaction(this._table,"readwrite"),i=n.objectStore(this._table),o=[];n.oncomplete=function(){t.resolve(o)};var r=i.openCursor();return r.onerror=function(t){console.log(t)},r.onsuccess=function(t){var e=t.target.result;e&&(o.push(e.value),e.delete(),e.continue())},t},t.update=function(t,n){var i=e(),o=this,r=this._db.transaction([this._table],"readwrite"),s=r.objectStore(this._table);try{var a=s.get(t);a.onerror=function(t){return a.result?void i.fail(t.target.errorCode):void o.addRows([n]).then(function(){i.resolve(n)})},a.onsuccess=function(){if(!a.result)return void o.addRows([n]).then(function(){i.resolve(n)});var t=s.put(n);t.onerror=function(){i.fail("update failed ")},t.onsuccess=function(){i.resolve(n)}}}catch(c){return this.addRows([n])}return i}}(this)},n=function(t,e,i,o,r,s,a,c){if(!(this instanceof n))return new n(t,e,i,o,r,s,a,c);var u=[t,e,i,o,r,s,a,c];if(this.__factoryClass){var f,l=this;if(this.__factoryClass.forEach(function(t){f=t.apply(l,u)}),"[object Function]"==Object.prototype.toString.call(f)){if(f._classInfo.name!=n._classInfo.name)return new f(t,e,i,o,r,s,a,c)}else if(f)return f}if(this.__traitInit){var l=this;this.__traitInit.forEach(function(t){t.apply(l,u)})}else"function"==typeof this.init&&this.init.apply(this,u)};n._classInfo={name:"dbTable"},n.prototype=new t,"undefined"!=typeof window&&(window.dbTable=n),"undefined"!=typeof window&&(window.dbTable_prototype=t),function(t){t.guid=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},t.isArray=function(t){return"undefined"==typeof t?this.__isA:"[object Array]"===Object.prototype.toString.call(t)},t.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},t.isObject=function(t){return"undefined"==typeof t?this.__isO:t===Object(t)}}(this),function(t){var e,o,r;t._initDB=function(){r||(r=window.indexedDB,e=!0,o=i("sys.db",{tables:{databases:{createOptions:{keyPath:"name"}}}}))},t.clearDatabases=function(t){o.then(function(){var e=o.table("databases");e.forEach(function(e,n){t(e)&&(r.deleteDatabase(e.name),n.delete())})})},t.createTable=function(t,e){this._db.createObjectStore(t,e);return this.table(t)},t.getDB=function(){return this._db},t.getStore=function(t,e){var n=this._db.transaction(t,e);return n.objectStore(t)},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(t,e){if(!this._db&&(this._initDB(),t)){var n=this,i=r.open(t,4);i.onerror=function(t){console.error(t.target.errorCode)},i.onsuccess=function(e){o.then(function(){var e=o.table("databases");e.addRows([{name:t}])}),n._db=e.target.result,n.resolve(!0)},i.onupgradeneeded=function(t){var i=t.target.result;if(n._db=i,e&&e.tables)for(var o in e.tables)if(e.tables.hasOwnProperty(o)){var r=e.tables[o];i.createObjectStore(o,r.createOptions)}}}}),t.table=function(t){return n(this._db,t)}}(this)};n.prototype=e.prototype;var i=function(t,e,n,o,r,s,a,c){if(!(this instanceof i))return new i(t,e,n,o,r,s,a,c);var u=[t,e,n,o,r,s,a,c];if(this.__factoryClass){var f,l=this;if(this.__factoryClass.forEach(function(t){f=t.apply(l,u)}),"[object Function]"==Object.prototype.toString.call(f)){if(f._classInfo.name!=i._classInfo.name)return new f(t,e,n,o,r,s,a,c)}else if(f)return f}if(this.__traitInit){var l=this;this.__traitInit.forEach(function(t){t.apply(l,u)})}else"function"==typeof this.init&&this.init.apply(this,u)};i._classInfo={name:"_localDB"},i.prototype=new n,"undefined"!=typeof window&&(window._localDB=i),"undefined"!=typeof window&&(window._localDB_prototype=n);var o=function(){!function(t){t.guid=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},t.isArray=function(t){return"undefined"==typeof t?this.__isA:"[object Array]"===Object.prototype.toString.call(t)},t.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},t.isObject=function(t){return"undefined"==typeof t?this.__isO:t===Object(t)}}(this),function(t){var n;t.hasOwnProperty("__factoryClass")||(t.__factoryClass=[]),t.__factoryClass.push(function(t,e){return t===!1&&e?void 0:(n||(n={}),n[t]?n[t]:void(n[t]=this))}),t.addCommands=function(t,e){if(this.isArray(t)){var n=this;return t.forEach(function(t){n.addCommands(t)}),this}this._commands.push({fnCmd:t,fnFail:e,async:!0})},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(t,e){this._commands||(this._commands=[],this.waitingList=[],this._index=0);var n=this;e||later().every(1/30,function(){n.step()})}),t.step=function(){var t=this._index,n=this._commands.length;if(t!=n){for(var i=e(),o=i,r=e(),s=this;n>t;){var a=this._commands[t];!function(t){o=o.then(function(){var n=e();return t.fnCmd(function(){n.resolve(!0)},function(e){n.resolve(!0),t.fnFail&&t.fnFail(e)}),n}).fail(function(e){t.fnFail&&t.fnFail(e)})}(a),this._index++,t++}return o.then(function(){if(s.waitingList.shift(),r.resolve(!0),s.waitingList.length){var t=s.waitingList[0];t.resolve(!0)}}).fail(function(){}),this.waitingList.push(i),1==this.waitingList.length&&i.resolve(!0),r}}}(this)},r=function(t,e,n,i,o,s,a,c){if(!(this instanceof r))return new r(t,e,n,i,o,s,a,c);var u=[t,e,n,i,o,s,a,c];if(this.__factoryClass){var f,l=this;if(this.__factoryClass.forEach(function(t){f=t.apply(l,u)}),"[object Function]"==Object.prototype.toString.call(f)){if(f._classInfo.name!=r._classInfo.name)return new f(t,e,n,i,o,s,a,c)}else if(f)return f}if(this.__traitInit){var l=this;this.__traitInit.forEach(function(t){t.apply(l,u)})}else"function"==typeof this.init&&this.init.apply(this,u)};r._classInfo={name:"sequenceStepper"},r.prototype=new o,"undefined"!=typeof window&&(window.sequenceStepper=r),"undefined"!=typeof window&&(window.sequenceStepper_prototype=o),function(t){t.guid=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},t.isArray=function(t){return"undefined"==typeof t?this.__isA:"[object Array]"===Object.prototype.toString.call(t)},t.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},t.isObject=function(t){return"undefined"==typeof t?this.__isO:t===Object(t)}}(this),function(t){t.fiddle=function(t,e){var n=document.createElement("IFRAME"),i=this.guid(),o=decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chead%3E");if(t.scripts&&t.scripts.forEach(function(t){o+=decodeURIComponent("%3Cscript%20src%3D'")+t+decodeURIComponent("'%3E%3C%2Fscript%3E")}),t.stylesheets&&t.stylesheets.forEach(function(t){o+='<link rel="stylesheet" href="'+t+'"></link>'}),t.head&&(o+=t.head),o+="</head><body>",t.callBackName||(t.callBackName="fiddleDone"),t.onReady&&t.callBackName){var r=window.localStorage,s=function(){var e;(e=r.getItem(i))&&(later().removeFrameFn(s),t.onReady(JSON.parse(e)))};later().onFrame(s),o+=decodeURIComponent("%3Cscript%3E")+"function "+t.callBackName+"(v){window['localStorage'].setItem('"+i+"', JSON.stringify(v));}",o+=decodeURIComponent("%3C%2Fscript%3E")}t.html&&(o+=t.html),t.jsCode&&(o+=decodeURIComponent("%3Cscript%3E")+t.jsCode+decodeURIComponent("%3C%2Fscript%3E")),o+="</body></html>",e?e.appendChild(n):document.body.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.write(o),n.contentWindow.document.close();var a=n.style;return a.width=(t.width||800)+"px",a.height=(t.height||600)+"px",n},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(t){this._options=t}),t.runTests=function(t){var e=this;this._results=[];var n=t.fns.length,i=0,o=r();t.fns.forEach(function(r){var s,a="";t.prepCode&&(a+=";\n"+t.prepCode+";\n"),a+="string"==typeof r?"(function(testResults) {"+r+"})(fiddleDone)":"("+r.toString()+")(fiddleDone)",o.addCommands(function(o){var r={styleheets:t.stylesheets||[],scripts:t.scripts||[],html:t.html||"",jsCode:a,width:t.width||800,height:t.height||600,onReady:function(r){e._results.push(r),s.parentNode.removeChild(s),o(),i++,i==n&&(t.onReady&&t.onReady(e._results),t.toIndexedDB&&e.saveToIndexed(t.toIndexedDB,e._results,t.description))}};s=e.fiddle(r)})})},t.saveToIndexed=function(t,e,n){var o=i(t,{tables:{sessions:{createOptions:{autoIncrement:!0}}}});o.then(function(){o.table("sessions").addRows([{testRunUTC:(new Date).getTime(),extra:n||{},results:e}])})}}(this)},jestBench=function(t,e,n,i,o,r,s,a){if(!(this instanceof jestBench))return new jestBench(t,e,n,i,o,r,s,a);var c=[t,e,n,i,o,r,s,a];if(this.__factoryClass){var u,f=this;if(this.__factoryClass.forEach(function(t){u=t.apply(f,c)}),"[object Function]"==Object.prototype.toString.call(u)){if(u._classInfo.name!=jestBench._classInfo.name)return new u(t,e,n,i,o,r,s,a)}else if(u)return u}if(this.__traitInit){var f=this;this.__traitInit.forEach(function(t){t.apply(f,c)})}else"function"==typeof this.init&&this.init.apply(this,c)};jestBench._classInfo={name:"jestBench"},jestBench.prototype=new jestBench_prototype,"undefined"!=typeof window&&(window.jestBench=jestBench),"undefined"!=typeof window&&(window.jestBench_prototype=jestBench_prototype);